from  random import randint
N = randint(4, 30)
flak = 0
step = 4
winner = 4
spis_connect = ["Ğ¯ Ñ…Ğ¾Ğ¶Ñƒ ğŸ˜ˆ", "Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ¼Ğ¾Ğ¹ Ñ…Ğ¾Ğ´ ğŸ˜‹", "Ğ¡Ğ´ĞµĞ»Ğ°ĞµĞ¼ Ñ‚Ğ°Ğº ğŸ˜"]
print(len(spis_connect))
print(f"ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ°Ğ¼Ğ½ĞµĞ¹ Ğ±ÑƒĞ´ĞµÑ‚ Ñ€Ğ°Ğ²Ğ½Ğ¾ {N}")


while N > 1:
    stepT = randint(1, 3)

    while(flak == 0 or step > 3 or step < 1):
        try:
            step = int(input("Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ¾Ğ·ÑŒĞ¼ĞµÑ‚Ğµ ĞºĞ°Ğ¼Ğ½ĞµĞ¹(Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾: 1, 2, 3)? \n"))
            flak = 1
            if step > 3 or step < 1 or step > N:
                print("Ğ¥ĞĞ¥ĞĞ¥Ğ, Ğ½Ğµ ÑĞ¼ĞµÑˆĞ½Ğ¾ ğŸ˜, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ")
                flak = 0
        except ValueError:
            print("Ğ¥ĞĞ¥ĞĞ¥Ğ, Ğ½Ğµ ÑĞ¼ĞµÑˆĞ½Ğ¾ ğŸ˜, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ")
            flak = 0
    flak = 0
    N -= step

    if  int(str(N)[len(str(N)) - 1]) > 4 or N in [10, 11, 12, 13, 14]:
        print(f"ĞĞºĞµĞ¹, Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ {N} ĞºĞ°Ğ¼Ğ½ĞµĞ¹")
    elif int(str(N)[len(str(N)) - 1]) >= 2 and int(str(N)[len(str(N)) -1]) <= 4:
        print(f"ĞĞºĞµĞ¹, Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ {N} ĞºĞ°Ğ¼Ğ½Ñ")
    else:
        print(f"ĞĞºĞµĞ¹, Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»ÑÑ {N} ĞºĞ°Ğ¼ĞµĞ½ÑŒ")


    winner = 0
    if N == 1:
        break
    print(spis_connect[randint(0, len(spis_connect))-1])
    if N == 4:
        print("Ğ£Ğ±ĞµÑ€Ñƒ Ğ¸Ğ· ĞºÑƒÑ‡Ğ¸ 3 ĞºĞ°Ğ¼Ğ½Ñ")
        N -= 3
        print(f"Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»ÑÑ {N} ĞºĞ°Ğ¼ĞµĞ½ÑŒ")
    elif N == 3:
        N-= 2
        print("Ğ£Ğ±ĞµÑ€Ñƒ Ğ¸Ğ· ĞºÑƒÑ‡Ğ¸ 2 ĞºĞ°Ğ¼Ğ½Ñ")
        print(f"Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»ÑÑ {N} ĞºĞ°Ğ¼ĞµĞ½ÑŒ")
    elif N == 2:
        print("Ğ£Ğ±ĞµÑ€Ñƒ Ğ¸Ğ· ĞºÑƒÑ‡Ğ¸ ĞºĞ°Ğ¼ĞµĞ½ÑŒ")
        N-=1
        print(f"ĞÑ‚Ğ½Ñ‹Ğ½Ğµ Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»ÑÑ {N} ĞºĞ°Ğ¼ĞµĞ½ÑŒ")
    else:
        N -= stepT
        if stepT != 1:
            print(f"Ğ£Ğ±ĞµÑ€Ñƒ Ğ¸Ğ· ĞºÑƒÑ‡Ğ¸ {stepT} ĞºĞ°Ğ¼Ğ½Ñ")
        else:
            print(f"Ğ£Ğ±ĞµÑ€Ñƒ Ğ¸Ğ· ĞºÑƒÑ‡Ğ¸ {stepT} ĞºĞ°Ğ¼ĞµĞ½ÑŒ")

        if int(str(N)[len(str(N)) - 1]) > 4 or N in [10, 11, 12, 13, 14]:
            print(f"Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ {N} ĞºĞ°Ğ¼Ğ½ĞµĞ¹")
        elif int(str(N)[len(str(N)) - 1]) >= 2 and int(str(N)[len(str(N)) - 1]) <= 4:
            print(f"ĞÑ‚Ğ½Ñ‹Ğ½Ğµ Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ {N} ĞºĞ°Ğ¼Ğ½Ñ")
        else:
            print(f"ĞÑƒ Ğ²ÑÑ‘, Ğ² ĞºÑƒÑ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ»ÑÑ {N} ĞºĞ°Ğ¼ĞµĞ½ÑŒ")
    winner = 1
    if N == 1:
        break


if winner == 0 and N!=0:
    print("Ğ’Ğ°ÑˆĞ° Ğ²Ğ·ÑĞ»Ğ°ğŸ˜")
else:
    print("Ğ˜Ğ·Ğ¸ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ° ğŸ˜")

